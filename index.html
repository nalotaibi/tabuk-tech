<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="apple-touch-icon" href="IMG_1812.jpeg">
    <link rel="icon" href="IMG_1812.jpeg">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØºÙŠØ§Ø¨ Ø§Ù„Ø°ÙƒÙŠØ©</title>
    <style>
        :root {
            --primary: #1d5c41;
            --safe: #22c55e;
            --warning: #facc15;
            --orange: #fb923c;
            --danger: #ef4444;
            --bg-gradient: linear-gradient(135deg, #f4f8f7 0%, #e0ece9 100%);
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: var(--bg-gradient);
            padding: 20px 10px;
            direction: rtl;
            min-height: 100vh;
        }

        .app-container { max-width: 450px; margin: 0 auto; }

        .header-section { text-align: center; margin-bottom: 20px; }
        .college-logo img { width: 160px; margin-bottom: 10px; filter: drop-shadow(0 2px 5px rgba(0,0,0,0.1)); }
        .header-text h1 { margin: 0; font-size: 1.6rem; color: var(--primary); font-weight: 800; }
        .system-badge { display: inline-block; margin-top: 8px; padding: 4px 12px; background: #e8f5e9; color: #2e7d32; border-radius: 20px; font-size: 0.75rem; font-weight: bold; }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
        .action-bars { display: flex; gap: 10px; margin: 20px 0; }
        .add-btn { flex: 2; padding: 14px; background: var(--primary); color: white; border: none; border-radius: 16px; font-weight: bold; cursor: pointer; font-size: 1rem; box-shadow: 0 4px 12px rgba(29,92,65,0.2); }
        .reset-all { flex: 1; padding: 14px; background: #fff; color: #ef4444; border: 1px solid #ef4444; border-radius: 16px; cursor: pointer; font-weight: bold; }

        /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ù‚Ø±Ø± */
        .course-card {
            background: white; border-radius: 28px; padding: 22px; margin-bottom: 20px;
            box-shadow: 0 12px 30px rgba(0,0,0,0.06); border: 1px solid #e1e9e7; position: relative;
            transition: transform 0.2s;
        }

        .delete-course { position: absolute; top: 18px; left: 18px; background: #fee2e2; color: #ef4444; border: none; width: 28px; height: 28px; border-radius: 50%; cursor: pointer; font-size: 0.9rem; display: flex; align-items: center; justify-content: center; }

        .course-title { 
            width: 85%; border: none; border-bottom: 2px solid #f0f0f0; 
            font-size: 1.2rem; font-weight: bold; color: var(--primary); 
            margin-bottom: 18px; padding: 5px; outline: none; background: transparent;
        }
        .course-title:focus { border-bottom-color: var(--primary); }

        .grid-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px; }
        .input-group label { display: block; font-size: 0.75rem; color: #555; margin-bottom: 6px; font-weight: 600; }
        
        select, input { 
            width: 100%; padding: 12px; border-radius: 14px; 
            border: 1.5px solid #edf2f1; font-family: inherit; text-align: center;
            font-size: 0.95rem; outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--primary); background: #f9fdfc; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
        .result-area { border-radius: 20px; padding: 18px; margin-top: 18px; text-align: center; }
        .safe-bg { background: #f0fdf4; border: 1px solid #dcfce7; }
        .warning-bg { background: #fffbeb; border: 1px solid #fef3c7; }
        .danger-bg { background: #fef2f2; border: 1px solid #fee2e2; }

        .progress-bar { height: 10px; background: #e5e7eb; border-radius: 5px; margin: 12px 0; overflow: hidden; }
        .progress-fill { height: 100%; width: 0%; transition: 0.8s ease-in-out; }

        .advice-box { margin-top: 12px; padding-top: 12px; border-top: 1px dashed rgba(0,0,0,0.1); font-size: 0.85rem; color: #444; line-height: 1.5; }
        .advice-box b { color: var(--primary); font-size: 1rem; }

        .footer-note { text-align: center; font-size: 0.85rem; color: #718096; margin-top: 40px; border-top: 1px solid #d1d9e6; padding-top: 20px; }
    </style>
</head>
<body>

<div class="app-container">
    <header class="header-section">
        <div class="college-logo"><img src="IMG_1800.png" alt="Logo"></div>
        <div class="header-text">
            <h1>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØºÙŠØ§Ø¨ Ø§Ù„Ø°ÙƒÙŠØ©</h1>
            <span class="system-badge">Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¤Ø³Ø³Ø© (20% ØºÙŠØ§Ø¨)</span>
        </div>
    </header>

    <div class="action-bars">
        <button class="add-btn" onclick="addNewCourse()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø±Ø± Ø¬Ø¯ÙŠØ¯</button>
        <button class="reset-all" onclick="clearEverything()">ğŸ—‘ï¸ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„ØºÙŠØ§Ø¨</button>
    </div>

    <div id="coursesList">
        </div>

    <footer class="footer-note">
        <p style="font-weight: bold; color: var(--primary); margin-bottom: 5px;">Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªØµÙ…ÙŠÙ…: Ø£. Ù†ÙˆØ±Ø© Ø§Ù„Ù‚Ø«Ø§Ù…ÙŠ</p>
        <p style="margin: 2px 0;">Ø§Ù„ÙƒÙ„ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ù„Ù„Ø¨Ù†Ø§Øª Ø¨ØªØ¨ÙˆÙƒ</p>
        <p style="font-size: 0.75rem; opacity: 0.8;">Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ø³Ø¨ ÙˆØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª | 2026Ù…</p>
        
        <div style="margin-top: 15px;">
            <a href="https://www.freecounterstat.com" title="website counter"><img src="https://counter1.optistats.ovh/private/freecounterstat.php?c=pt4x3lgqdkek5gqe8qd7ekhfb1ezkp4m" border="0" title="website counter" alt="website counter"></a>
        </div>
    </footer>
</div>

<script>
    // Ù…ØµÙÙˆÙØ© ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª - ØªØ³ØªØ±Ø¬Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…ØªØµÙØ­
    let courses = JSON.parse(localStorage.getItem('myCourses')) || [];

    // Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø±Ø± Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…ØµÙÙˆÙØ©
    function addNewCourse() {
        const newCourse = {
            id: Date.now(),
            name: 'Ø§Ø³Ù… Ø§Ù„Ù…Ù‚Ø±Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯',
            weeklyHours: 4,
            absent1: '',
            absent2: ''
        };
        courses.push(newCourse);
        renderCourses();
    }

    // Ø¹Ø±Ø¶ ÙˆØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
    function renderCourses() {
        const list = document.getElementById('coursesList');
        list.innerHTML = '';
        
        courses.forEach(course => {
            // Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
            const weeklyH = parseFloat(course.weeklyHours);
            const totalSemHours = weeklyH * 16;
            const limit = totalSemHours * 0.20;
            const currentAbsent = (parseFloat(course.absent1) || 0) + ((parseFloat(course.absent2) || 0) * 2);
            const percent = (currentAbsent / totalSemHours) * 100;
            const remaining = limit - currentAbsent;

            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„Ù„ÙˆÙ†
            let statusClass = 'safe-bg', statusColor = 'var(--safe)', msg = 'ğŸŸ¢ ÙˆØ¶Ø¹Ùƒ Ø¢Ù…Ù† ÙˆÙ…Ø³ØªÙ‚Ø±';
            if (percent >= 20) { statusClass = 'danger-bg'; statusColor = 'var(--danger)'; msg = 'ğŸš« Ø­Ø§Ù„Ø© Ø­Ø±Ù…Ø§Ù†'; }
            else if (percent >= 15) { statusClass = 'warning-bg'; statusColor = 'var(--orange)'; msg = 'ğŸŸ  ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù‚ØªØ±Ø¨ØªÙ Ù…Ù† Ø§Ù„Ø­Ø±Ù…Ø§Ù†'; }
            else if (percent >= 10) { statusClass = 'warning-bg'; statusColor = 'var(--warning)'; msg = 'ğŸŸ¡ Ø§Ù†ØªØ¨Ø§Ù‡: Ø¨Ø¯Ø£ Ø±ØµÙŠØ¯ÙƒÙ Ø¨Ø§Ù„Ù†Ù‚ØµØ§Ù†'; }

            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ø°ÙƒÙŠØ©
            let advice = "";
            if(percent < 20) {
                advice = `<div class="advice-box">
                    ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØºÙŠØ§Ø¨ <b>${Math.floor(remaining)}</b> Ù…Ø­Ø§Ø¶Ø±Ø© (ÙƒÙ„ Ù…Ø­Ø§Ø¶Ø±Ø© Ø³Ø§Ø¹Ø© )<br>
                    Ø£Ùˆ <b>${Math.floor(remaining/2)}</b> Ù…Ø­Ø§Ø¶Ø±Ø© (ÙƒÙ„ Ù…Ø­Ø§Ø¶Ø±Ø© Ø³Ø§Ø¹ØªÙŠÙ†)
                </div>`;
            } else {
                advice = `<div class="advice-box" style="color:var(--danger)">Ù„Ù‚Ø¯ ØªØ¬Ø§ÙˆØ²ØªÙ Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡ Ù„Ù„ØºÙŠØ§Ø¨.</div>`;
            }

            // Ø¨Ù†Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
            const card = document.createElement('div');
            card.className = 'course-card';
            card.innerHTML = `
                <button class="delete-course" onclick="deleteCourse(${course.id})">âœ•</button>
                <input type="text" class="course-title" value="${course.name}" onchange="updateCourse(${course.id}, 'name', this.value)" placeholder="Ø£Ø¯Ø®Ù„ÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©">
                
                <div class="grid-inputs">
                    <div class="input-group">
                        <label>Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù‚Ø±Ø± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</label>
                        <select onchange="updateCourse(${course.id}, 'weeklyHours', this.value)">
                            ${[1,2,3,4,5,6].map(h => `<option value="${h}" ${course.weeklyHours == h ? 'selected' : ''}>${h} Ø³Ø§Ø¹Ø§Øª</option>`).join('')}
                        </select>
                    </div>
                    <div class="input-group">
                        <label>ØºÙŠØ§Ø¨ (Ø³Ø§Ø¹Ø©)</label>
                        <input type="number" value="${course.absent1}" placeholder="0" oninput="updateCourse(${course.id}, 'absent1', this.value)">
                    </div>
                </div>

                <div class="input-group" style="margin-bottom:15px;">
                    <label>ØºÙŠØ§Ø¨ (Ø³Ø§Ø¹ØªÙŠÙ† / Ù…Ø­Ø§Ø¶Ø±Ø© ÙƒØ§Ù…Ù„Ø©)</label>
                    <input type="number" value="${course.absent2}" placeholder="0" oninput="updateCourse(${course.id}, 'absent2', this.value)">
                </div>

                <div class="result-area ${statusClass}">
                    <div style="font-size:0.8rem; color:#666;">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø±Ù…Ø§Ù†</div>
                    <div style="font-size:1.5rem; font-weight:800; color:var(--primary); margin:5px 0;">
                        ${percent >= 20 ? 'ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯' : remaining.toFixed(1) + ' Ø³Ø§Ø¹Ø©'}
                    </div>
                    <div style="font-size:0.8rem; font-weight:bold; color:${statusColor}">${msg}</div>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" style="width:${Math.min((currentAbsent/limit)*100, 100)}%; background:${statusColor}"></div>
                    </div>

                    <div style="display:flex; justify-content:space-between; font-size:0.75rem; color:#555; font-weight:600;">
                        <span>Ø§Ù„Ù†Ø³Ø¨Ø©: ${percent.toFixed(1)}%</span>
                        <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØºÙŠØ§Ø¨: ${currentAbsent} Ø³Ø§Ø¹Ø©</span>
                    </div>
                    ${advice}
                </div>
            `;
            list.appendChild(card);
        });
        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù‡Ø§ØªÙ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        localStorage.setItem('myCourses', JSON.stringify(courses));
    }

    // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù‚Ø±Ø± Ù…Ø¹ÙŠÙ†
    function updateCourse(id, field, value) {
        const index = courses.findIndex(c => c.id === id);
        courses[index][field] = (field === 'name') ? value : value;
        renderCourses();
    }

    // Ø­Ø°Ù Ù…Ù‚Ø±Ø±
    function deleteCourse(id) {
        if(confirm('Ù‡Ù„ Ø£Ù†ØªÙ Ù…ØªØ£ÙƒØ¯Ø© Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø±Ø± Ù…Ù† Ù‚Ø§Ø¦Ù…ØªÙƒÙØŸ')) {
            courses = courses.filter(c => c.id !== id);
            renderCourses();
        }
    }

    // ØªØµÙÙŠØ± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
    function clearEverything() {
        if(confirm('Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø©. Ù‡Ù„ Ø£Ù†ØªÙ Ù…ØªØ£ÙƒØ¯Ø©ØŸ')) {
            courses = [];
            localStorage.removeItem('myCourses');
            renderCourses();
        }
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    window.onload = renderCourses;
</script>

</body>
</html>
